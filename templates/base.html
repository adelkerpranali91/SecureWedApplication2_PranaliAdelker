<!DOCTYPE html>
<html>
<head>
    <title>Secure Web App</title>
    <style>
        body { font-family: Arial, sans-serif; margin:0; padding:0; }
        nav {
            display:flex;
            justify-content:space-between;
            align-items:center;
            padding:12px 20px;
            background:#f7f7f7;
            border-bottom:1px solid #ddd;
        }
        .right-links { display:flex; align-items:center; gap:12px; }
        nav a { text-decoration:none; color:#1a1a1a; font-weight:600; }
        nav a:hover { text-decoration:underline; }
        .content { padding:20px; }
    </style>
</head>
<body>

<nav>
  <!-- left area (site title / logo) -->
  <div>
    <a href="{{ url_for('index') }}">Home</a>
  </div>

  <!-- right area: show Login/Register when NOT logged in, else show Logged-in + Logout -->
  <div class="right-links">
    {# Check multiple keys to be robust depending on your app #}
    {% if session.get('user_id') or session.get('username') %}
      <span>Logged in as <strong>{{ session.get('username') or session.get('user_email') or 'user' }}</strong></span>
      <a href="{{ url_for('logout') }}">Logout</a>
    {% else %}
      <a href="{{ url_for('login') }}">Login</a>
      <a href="{{ url_for('register') }}">Register</a>
    {% endif %}
  </div>
</nav>

<div class="content">
  {% with messages = get_flashed_messages() %}
    {% if messages %}
      <ul class="flashes">
        {% for m in messages %}<li>{{ m }}</li>{% endfor %}
      </ul>
    {% endif %}
  {% endwith %}

  {% block content %}{% endblock %}
</div>

</body>
</html>
